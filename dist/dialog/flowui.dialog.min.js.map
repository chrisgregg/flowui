{"version":3,"sources":["src/dialog/js/node_modules/browser-pack/_prelude.js","flowui.dialog.js","src/dialog/js/src/dialog/js/helpers.js","src/dialog/js/src/loader/js/index.js","src/dialog/js/src/modal/js/index.js","src/dialog/js/src/dialog/js/index.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","FlowUI","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","Helpers","value","element","to","duration","_this","start","scrollTop","change","increment","animateScroll","elapsedTime","position","easeInOut","setTimeout","currentTime","2","_typeof","Symbol","iterator","obj","constructor","Modal","Loader","arguments","undefined","id","Date","getTime","modalId","parent","document","querySelector","body","modalObj","type","_render","_exportObjInstance","_loaders","children","_renderModal","getElementById","container","createElement","className","loaderElement","appendChild","_centerVertically","_animateIn","viewportHeight","Math","max","documentElement","clientHeight","innerHeight","parentHeight","loaderHeight","offsetHeight","loaderWidth","offsetWidth","scrollPosition","scrollY","topLoaderDiv","style","top","left","display","dispose","_animateOut","close","_dispose","get","_close","../../modal/js/index.js","3","_modals","assign","setAttribute","modalElement","parentNode","removeChild","replace","4","Dialog","_ref","title","html","url","promise","buttons","_ref$options","options","DialogOptions","loaderObj","dialogElement","_renderDialog","_attachEvents","_registerEventListeners","_dialogs","m","_this2","Promise","resolve","reject","req","XMLHttpRequest","open","onload","status","response","statusText","onerror","send","_this3","contentPromise","_getContent","contentWrapper","innerHTML","content","then","closeButtonElement","onclick","bind","buttonsWrapper","x","forEach","button","buttonElement","href","_bindScripts","_positionDialog","_focus","dialogHeight","clientWidth","innerWidth","y","_scrollToDialog","yPosition","offsetTop","scrollTo","scripts","Array","from","getElementsByTagName","externalScripts","embeddedScripts","script","src","push","loadScripts","scriptsArray","onComplete","newScript","addEventListener","console","log","shift","text","_this4","events","onclose","_setState","modalHasChildDialogs","childDialogs","flowObject","_this5","ex","flowObj","_reactivatePreviousDialog","allDialogs","previousDialog","keys","_this6","sanitizeClasses","classes","detail","animation","stackable","out","state","event","CustomEvent","dispatchEvent","dialog","_this7","escapable","keyCode","_onStateChange","_ref2","_ref2$stackable","_ref2$escapable","_ref2$animation","_ref2$events","in","onopen","../../loader/js/index.js","./helpers.js"],"mappings":"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","file":"flowui.dialog.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.FlowUI = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nmodule.exports = function () {\n    function Helpers() {\n        _classCallCheck(this, Helpers);\n    }\n\n    _createClass(Helpers, null, [{\n        key: \"scrollTo\",\n\n\n        /**\r\n         * Scroll to\r\n         * @param element\r\n         * @param to\r\n         * @param duration\r\n         */\n\n        value: function scrollTo(element, to, duration) {\n\n            var _this = this;\n\n            var start = element.scrollTop,\n                change = to - start,\n                increment = 20;\n\n            var animateScroll = function animateScroll(elapsedTime) {\n                elapsedTime += increment;\n                var position = _this.easeInOut(elapsedTime, start, change, duration);\n                element.scrollTop = position;\n                if (elapsedTime < duration) {\n                    setTimeout(function () {\n                        animateScroll(elapsedTime);\n                    }, increment);\n                }\n            };\n\n            animateScroll(0);\n        }\n\n        /**\r\n         * Easing Function for Scrolling\r\n         * @param currentTime\r\n         * @param start\r\n         * @param change\r\n         * @param duration\r\n         * @returns {*}\r\n         */\n\n    }, {\n        key: \"easeInOut\",\n        value: function easeInOut(currentTime, start, change, duration) {\n            currentTime /= duration / 2;\n            if (currentTime < 1) {\n                return change / 2 * currentTime * currentTime + start;\n            }\n            currentTime -= 1;\n            return -change / 2 * (currentTime * (currentTime - 2) - 1) + start;\n        }\n    }]);\n\n    return Helpers;\n}();\n\n},{}],2:[function(require,module,exports){\n'use strict';\n\n// Dependencies\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Modal = require('../../modal/js/index.js');\n\nmodule.exports = function () {\n\n    /**\r\n     *\r\n     * @param props\r\n     * props.text : text to display while loading\r\n     * props.parent : parent element to inject loader into\r\n     * props.promise : if provided, loader will close when promise resolved\r\n     * props.id : id of loader\r\n     */\n    function Loader() {\n        var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Loader);\n\n        this.id = props.id || \"loader-\" + new Date().getTime();\n        this.modalId = props.modalId || \"loader-modal-\" + new Date().getTime(); // Generated ID for parent Modal\n        this.parent = props.parent ? _typeof(props.parent) === 'object' ? props.parent : document.querySelector(props.parent) : document.body;\n        this.modalObj;\n\n        this.type = \"loader\";\n\n        window['FlowUI'] = window['FlowUI'] || {};\n\n        this._render();\n        this._exportObjInstance();\n    }\n\n    _createClass(Loader, [{\n        key: '_exportObjInstance',\n\n\n        /**\r\n         * Save reference to instantiated modal to window\r\n         * so can access to object through DOM\r\n         * @private\r\n         */\n        value: function _exportObjInstance() {\n\n            window['FlowUI'] = window['FlowUI'] || {};\n            window['FlowUI']._loaders = window['FlowUI']._loaders || {};\n            window['FlowUI']._loaders[this.id] = this;\n\n            // Attach a reference to parent modal\n            this.modalObj.children[this.id] = this;\n        }\n\n        /**\r\n         *\r\n         * @private\r\n         */\n\n    }, {\n        key: '_render',\n        value: function _render() {\n\n            this._renderModal();\n\n            // Check that element doesn't already exist\n            if (!document.getElementById(this.id)) {\n                var container = document.createElement(\"div\");\n                container.id = this.id;\n                container.className = \"flowui-loader\";\n\n                var loaderElement = document.createElement(\"div\");\n                loaderElement.className = \"spinner\";\n                container.appendChild(loaderElement);\n\n                document.getElementById(this.modalObj.id).appendChild(container);\n            }\n\n            this._centerVertically();\n            this._animateIn();\n        }\n\n        /**\r\n         * Render Modal\r\n         * @private\r\n         */\n\n    }, {\n        key: '_renderModal',\n        value: function _renderModal() {\n            this.modalObj = new Modal({\n                id: this.modalId,\n                parent: this.parent\n            });\n        }\n\n        /**\r\n         * Centre Dialog Vertically in Parent Element\r\n         * @private\r\n         */\n\n    }, {\n        key: '_centerVertically',\n        value: function _centerVertically() {\n\n            var loaderElement = document.getElementById(this.id);\n            var viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n            var parentHeight = Math.max(this.parent.clientHeight, this.parent.innerHeight || 0);\n            var loaderHeight = loaderElement.offsetHeight;\n            var loaderWidth = loaderElement.offsetWidth;\n            var scrollPosition = window.scrollY;\n\n            // Center vertically in parent container\n            var topLoaderDiv = parentHeight / 2 - loaderHeight / 2;\n\n            // If parentHeight is >= viewportHeight, we need to use viewportHeight instead\n            if (parentHeight > viewportHeight) {\n                topLoaderDiv = viewportHeight / 2 - loaderHeight / 2;\n\n                // If user is scrolled down at all, we need to adjust to make sure loader\n                // is displayed within current viewport\n                if (scrollPosition > 0) {\n                    topLoaderDiv += scrollPosition;\n                }\n            }\n\n            loaderElement.style.top = topLoaderDiv + \"px\";\n            loaderElement.style.left = 'calc(50% - ' + loaderWidth / 2 + 'px)';\n        }\n\n        /**\r\n         * Handles Animating Dialog In\r\n         * @private\r\n         */\n\n    }, {\n        key: '_animateIn',\n        value: function _animateIn() {\n            var _this = this;\n\n            setTimeout(function () {\n                document.getElementById(_this.id).className += \" animated zoomInLoader\";\n                document.getElementById(_this.id).style.display = \"\";\n            }, 400);\n        }\n\n        /**\r\n         * Handle Animating Out Dialog\r\n         * @private\r\n         */\n\n    }, {\n        key: '_animateOut',\n        value: function _animateOut() {\n            document.getElementById(this.id).className += \" zoomOutLoader\";\n        }\n\n        /**\r\n         * Handle Closing and removing from DOM\r\n         * @private\r\n         */\n\n    }, {\n        key: '_close',\n        value: function _close() {\n            var dispose = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n            this._animateOut();\n            if (dispose) {\n                this.modalObj.close();\n                this._dispose();\n            }\n        }\n\n        /**\r\n         * Remove object reference from dom\r\n         * @private\r\n         */\n\n    }, {\n        key: '_dispose',\n        value: function _dispose() {\n\n            delete window.FlowUI['_loaders'][this.id];\n        }\n    }, {\n        key: 'close',\n        get: function get() {\n            return this._close;\n        }\n    }, {\n        key: 'dispose',\n        get: function get() {\n            return this._dispose;\n        }\n    }]);\n\n    return Loader;\n}();\n\n},{\"../../modal/js/index.js\":3}],3:[function(require,module,exports){\n'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nmodule.exports = function () {\n\n    /**\r\n     * Modal Constructor\r\n     * @param props\r\n     * @param.id : Modal Id\r\n     * @param.parent : Parent element to inject modal into\r\n     * @param.className : Class names to append to modal\r\n     */\n    function Modal(props) {\n        _classCallCheck(this, Modal);\n\n        props = props || {};\n\n        this.id = props.id || \"modal-\" + new Date().getTime();\n        this.parent = props.parent ? _typeof(props.parent) === 'object' ? props.parent : document.querySelector(props.parent) : document.body;\n        this.className = props.className || \"\";\n        this.children = {}; // associative array of child elements using this modal\n\n        // Public Properties\n        this.type = \"modal\";\n        this.element = null;\n\n        window['FlowUI'] = window['FlowUI'] || {};\n\n        // Check if modal already exists, if so assign values from original\n        // and don't re-render or export instance\n        if (window['FlowUI']._modals && window['FlowUI']._modals[this.id]) {\n            Object.assign(this, window['FlowUI']._modals[this.id]);\n            return;\n        }\n\n        this._render();\n        this._exportObjInstance();\n    }\n\n    _createClass(Modal, [{\n        key: '_exportObjInstance',\n\n\n        /**\r\n         * Save reference to instantiated modal to window\r\n         * so can access to object through DOM\r\n         * @private\r\n         */\n        value: function _exportObjInstance() {\n            window['FlowUI'] = window['FlowUI'] || {};\n            window['FlowUI']._modals = window['FlowUI']._modals || {};\n            window['FlowUI']._modals[this.id] = this;\n        }\n\n        /**\r\n         * Render Modal\r\n         * @private\r\n         */\n\n    }, {\n        key: '_render',\n        value: function _render() {\n\n            this.parent.className += ' flowui-modal-parent';\n\n            var container = document.createElement(\"div\");\n            container.setAttribute(\"id\", this.id);\n            container.setAttribute(\"class\", 'flowui-modal animated fadeIn ' + this.className);\n            this.parent.appendChild(container);\n\n            this.element = container;\n        }\n\n        /**\r\n         * Close Modal\r\n         * @private\r\n         */\n\n    }, {\n        key: '_close',\n        value: function _close() {\n            var _this = this;\n\n            var modalElement = document.getElementById(this.id);\n            modalElement.className += \" fadeOut\";\n\n            setTimeout(function () {\n                modalElement.parentNode.removeChild(modalElement);\n                _this.parent.className = _this.parent.className.replace('flowui-modal-parent', '');\n            }, 1000);\n\n            this._dispose();\n        }\n\n        // Remove object references\n\n    }, {\n        key: '_dispose',\n        value: function _dispose() {\n\n            // Delete any child object references (UI elements using this modal obj)\n            for (var key in this.children) {\n                this.children[key].dispose();\n            }\n            delete window['FlowUI']._modals[this.id];\n        }\n    }, {\n        key: 'close',\n        get: function get() {\n            return this._close;\n        }\n    }]);\n\n    return Modal;\n}();\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Helpers = require('./helpers.js');\nvar Modal = require('../../modal/js/index.js');\nvar Loader = require('../../loader/js/index.js');\n\nmodule.exports = function () {\n\n    /**\r\n     * Dialog Constructor\r\n     * @param props {\r\n     *  id: Unique ID for Dialog\r\n     *  title: Dialog Title\r\n     *  html: Html to inject\r\n     *  url: URL to inject content from\r\n     *  promise: Promise object to get content from\r\n     *  buttons ([{title: '', onclick: function}]): Array of buttons to render\r\n     *  options (DialogOption): Customization options\r\n     */\n\n    function Dialog(_ref) {\n        var id = _ref.id,\n            title = _ref.title,\n            html = _ref.html,\n            url = _ref.url,\n            promise = _ref.promise,\n            buttons = _ref.buttons,\n            _ref$options = _ref.options,\n            options = _ref$options === undefined ? {} : _ref$options;\n\n        _classCallCheck(this, Dialog);\n\n        // Arguments\n        this.id = id || \"dialog-\" + new Date().getTime();\n        this.title = title;\n        this.html = html;\n        this.url = url;\n        this.promise = promise;\n        this.buttons = buttons;\n\n        this.options = new DialogOptions(options);\n\n        // Public Properties\n        this.type = \"dialog\";\n        this.modalObj;\n        this.loaderObj;\n        this.dialogElement = null;\n        this.parent = document.body;\n\n        window['FlowUI'] = window['FlowUI'] || {};\n\n        this._renderDialog();\n        this._attachEvents();\n        this._registerEventListeners();\n        this._exportObjInstance();\n    }\n\n    _createClass(Dialog, [{\n        key: '_exportObjInstance',\n\n\n        /**\r\n         * Save reference to instantiated dialog's to window\r\n         * so can access to object through DOM\r\n         * @private\r\n         */\n        value: function _exportObjInstance() {\n\n            window['FlowUI'] = window['FlowUI'] || {};\n            window['FlowUI']._dialogs = window['FlowUI']._dialogs || {};\n            window['FlowUI']._dialogs[this.id] = this;\n\n            // Attach a reference to parent modal\n            this.modalObj.children[this.id] = this;\n        }\n\n        /**\r\n         * Render Modal\r\n         * @private\r\n         */\n\n    }, {\n        key: '_renderModal',\n        value: function _renderModal() {\n\n            // Check if modal already exists for parent\n            if (window['FlowUI']._modals) {\n                for (var key in window['FlowUI']._modals) {\n                    var m = window['FlowUI']._modals[key];\n                    if (m.parent == this.parent) {\n                        this.modalObj = window['FlowUI']._modals[m.id];\n                    }\n                }\n            }\n\n            // If it doesn't exist, create new instance\n            if (!this.modalObj) {\n                this.modalObj = new Modal();\n            }\n\n            // If dialog content requires http request, show loader before rendering\n            if (this.url || this.promise) {\n                this.loaderObj = Loader({\n                    modalId: this.modalObj.id\n                });\n            }\n        }\n\n        /**\r\n         * Get Dialog Content (Async)\r\n         * @private\r\n         */\n\n    }, {\n        key: '_getContent',\n        value: function _getContent() {\n            var _this2 = this;\n\n            // If promise provided during instantiation, use promise object instead to get content\n            if (this.promise) {\n                return this.promise;\n            }\n\n            return new Promise(function (resolve, reject) {\n\n                // Static content provided as property\n                if (_this2.html) {\n                    resolve(_this2.html);\n                }\n\n                // Content from a partial or template retreived via http\n                else if (_this2.url) {\n\n                        // Do the usual XHR stuff\n                        var req = new XMLHttpRequest();\n                        req.open('GET', _this2.url);\n\n                        req.onload = function () {\n                            if (req.status == 200) {\n                                // Resolve the promise with the response text\n                                resolve(req.response);\n                            } else {\n                                reject(Error(req.statusText));\n                            }\n                        };\n\n                        req.onerror = function () {\n                            reject(Error(\"Network Error\"));\n                        };\n\n                        req.send();\n                    }\n            });\n        }\n\n        /**\r\n         * Render Dialog\r\n         * @private\r\n         */\n\n    }, {\n        key: '_renderDialog',\n        value: function _renderDialog() {\n            var _this3 = this;\n\n            this._renderModal();\n            var contentPromise = this._getContent();\n\n            // Render Container\n            var container = document.createElement(\"div\");\n            container.setAttribute('id', this.id);\n            container.setAttribute('class', 'flowui-dialog animated ' + (this.options.className ? this.options.className : ''));\n            //container.style.display = \"none\";\n\n            // Render Content Wrapper\n            var contentWrapper = document.createElement('div');\n            contentWrapper.setAttribute('class', 'content');\n            if (this.title) {\n                var title = document.createElement('div');\n                title.setAttribute('class', 'title');\n                title.innerHTML = this.title;\n                contentWrapper.appendChild(title);\n            }\n\n            // Render Inner Content\n            var content = document.createElement('div');\n            contentPromise.then(function (html) {\n                content.innerHTML = html;\n            });\n            content.setAttribute('class', 'inner-content');\n            contentWrapper.appendChild(content);\n\n            // Render Close Button\n            var closeButtonElement = document.createElement('a');\n            closeButtonElement.onclick = this._close.bind(this);\n            closeButtonElement.className = \"close\";\n            contentWrapper.appendChild(closeButtonElement);\n\n            // Render Buttons\n            if (this.buttons && this.buttons.length > 0) {\n                (function () {\n                    var buttonsWrapper = document.createElement('div');\n                    buttonsWrapper.setAttribute('class', 'buttons');\n                    var x = 0;\n                    _this3.buttons.forEach(function (button) {\n                        var buttonElement = document.createElement(\"a\");\n                        buttonElement.setAttribute('class', 'flowui-button ' + x++ + ' ' + (button.className || ''));\n                        buttonElement.innerHTML = button.title;\n                        buttonElement.onclick = button.onclick;\n                        buttonElement.href = button.href || 'javascript:;';\n                        buttonsWrapper.appendChild(buttonElement);\n                    });\n                    contentWrapper.appendChild(buttonsWrapper);\n                })();\n            }\n\n            container.appendChild(contentWrapper);\n\n            // Add to modal\n            this.modalObj.element.appendChild(container);\n\n            // Store dialog element to class property\n            this.dialogElement = container;\n\n            // Once content loaded, display\n            contentPromise.then(function () {\n\n                // Hide Loader\n                if (_this3.loaderObj) {\n                    _this3.loaderObj.close(false);\n                }\n\n                _this3._bindScripts();\n                _this3._positionDialog();\n                _this3._focus();\n            });\n        }\n\n        /**\r\n         * Positions Dialog in center of viewport,\r\n         * scrolling page to top of Dialog if needed\r\n         * @private\r\n         */\n\n    }, {\n        key: '_positionDialog',\n        value: function _positionDialog() {\n\n            var dialogElement = document.getElementById(this.id);\n            var viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n            var viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n            var dialogHeight = dialogElement.offsetHeight;\n            var dialogWidth = dialogElement.offsetWidth;\n            var scrollPosition = window.scrollY;\n\n            var y = scrollPosition + viewportHeight / 2 - dialogHeight / 2;\n            y = y < 0 ? 30 : y;\n\n            dialogElement.style.top = y + 'px';\n\n            // If dialog heigh doesn't fit in viewport, scroll page to top of dialog\n            if (dialogHeight > viewportHeight) {\n                this._scrollToDialog();\n            }\n        }\n\n        /**\r\n         * Scroll Page to top of Dialog\r\n         * @private\r\n         */\n\n    }, {\n        key: '_scrollToDialog',\n        value: function _scrollToDialog() {\n\n            var yPosition = this.dialogElement.offsetTop - 30;\n            yPosition = yPosition < 0 ? 0 : yPosition;\n            Helpers.scrollTo(document.body, yPosition, 1000);\n        }\n\n        /**\r\n         * Bind Scripts\r\n         * Dialog content can contain scripts, which need to be added to dom in order to be made available\r\n         * @private\r\n         */\n\n    }, {\n        key: '_bindScripts',\n        value: function _bindScripts() {\n\n            var scripts = Array.from(this.dialogElement.getElementsByTagName('script'));\n            var externalScripts = [];\n            var embeddedScripts = [];\n\n            // Separate external script from embedded\n            scripts.forEach(function (script) {\n                if (script.src == \"\") {\n                    embeddedScripts.push(script);\n                } else {\n                    externalScripts.push(script.src);\n                }\n            });\n\n            // Helper function to load array of external scripts\n            var loadScripts = function loadScripts(scriptsArray, onComplete) {\n\n                if (scriptsArray.length > 0) {\n                    var newScript = document.createElement('script');\n                    newScript.type = 'text/javascript';\n                    newScript.src = scriptsArray[0];\n                    document.documentElement.appendChild(newScript);\n\n                    newScript.addEventListener(\"load\", function () {\n                        console.log('External script from content loaded:', scriptsArray[0]);\n                        scriptsArray.shift();\n                        loadScripts(scriptsArray, onComplete);\n                    }, false);\n                } else {\n                    onComplete();\n                }\n            };\n\n            // First, load external scripts\n            loadScripts(externalScripts, function () {\n\n                // Once all external scripts loaded, add embedded scripts\n                embeddedScripts.forEach(function (script) {\n                    var newScript = document.createElement('script');\n                    newScript.text = script.innerHTML;\n                    document.documentElement.appendChild(newScript);\n                    console.log('Embedded script from content added');\n                });\n            });\n        }\n\n        /**\r\n         * Handle Closing Dialog and removing from DOM\r\n         * @private\r\n         */\n\n    }, {\n        key: '_close',\n        value: function _close() {\n            var _this4 = this;\n\n            if (this.options.events.onclose) {\n                this.options.events.onclose();\n            }\n            this._setState('closed');\n            this._dispose();\n\n            // Only close modal if there's no other dialogs using it\n            var modalHasChildDialogs = function modalHasChildDialogs() {\n                var childDialogs = [];\n                for (var key in _this4.modalObj.children) {\n                    var flowObject = _this4.modalObj.children[key];\n                    if (flowObject.type === 'dialog') {\n                        childDialogs.push(flowObject);\n                    }\n                }\n                return childDialogs.length > 0;\n            };\n\n            if (!modalHasChildDialogs()) {\n                this.modalObj.close();\n            }\n        }\n\n        /**\r\n         * Remove instance from global window scope and check if another dialog\r\n         * should be made active\r\n         * @private\r\n         */\n\n    }, {\n        key: '_dispose',\n        value: function _dispose() {\n            var _this5 = this;\n\n            // TO DO: Element from Remove from DOM\n            setTimeout(function () {\n                try {\n                    _this5.dialogElement.parentNode.removeChild(_this5.dialogElement);\n                } catch (ex) {\n                    // modal obj already removed\n                }\n            }, 1000);\n\n            // Delete object reference from parent modal's children\n            for (var key in this.modalObj.children) {\n                var flowObj = this.modalObj.children[key];\n                if (flowObj.id == this.id) {\n                    delete this.modalObj.children[this.id];\n                }\n            }\n\n            delete window['FlowUI']._dialogs[this.id];\n\n            this._reactivatePreviousDialog();\n        }\n\n        /**\r\n         * Reactives previous dialog (if any)\r\n         * @private\r\n         */\n\n    }, {\n        key: '_reactivatePreviousDialog',\n        value: function _reactivatePreviousDialog() {\n            var allDialogs = window['FlowUI']._dialogs;\n            var previousDialog = allDialogs[Object.keys(allDialogs)[Object.keys(allDialogs).length - 1]];\n            if (previousDialog) {\n                setTimeout(function () {\n                    previousDialog._focus();\n                }, 500);\n            }\n        }\n\n        /**\r\n         * Handle Dialog State Change (focus, inactive, dismissed)\r\n         * @param e\r\n         * @returns {string}\r\n         * @private\r\n         */\n\n    }, {\n        key: '_onStateChange',\n        value: function _onStateChange(e) {\n            var _this6 = this;\n\n            // Strip out any additional classes added after\n            var sanitizeClasses = function sanitizeClasses() {\n                var classes = \"flowui-dialog animated \" + _this6.options.className;\n                return classes;\n            };\n\n            document.getElementById(this.id).setAttribute(\"state\", e.detail.status);\n\n            switch (e.detail.status) {\n                case 'active':\n                    document.getElementById(this.id).className = sanitizeClasses() + ' ' + this.options.animation.in;\n                    break;\n                case 'inactive':\n                    // If dialog isn't stackable, instead of just inacivating - we ne to also dispose\n                    if (!this.options.stackable) {\n                        document.getElementById(this.id).className = sanitizeClasses() + ' inactive';\n                        this._dispose();\n                        break;\n                    }\n                    if (Object.keys(window['FlowUI']._dialogs).length > 1) {\n                        document.getElementById(this.id).className = sanitizeClasses() + ' inactive';\n                        break;\n                    }\n                    document.getElementById(this.id).className = sanitizeClasses() + ' ' + this.options.animation.out;\n                    break;\n                case 'closed':\n                    document.getElementById(this.id).className = sanitizeClasses() + ' ' + this.options.animation.out;\n                    break;\n                default:\n                // catch all\n            }\n        }\n\n        /**\r\n         * Set Dialog State (active, inactive)\r\n         * @private\r\n         */\n\n    }, {\n        key: '_setState',\n        value: function _setState(state) {\n\n            var event = new CustomEvent(\"stateChange\", { detail: { status: state } });\n            this.dialogElement.dispatchEvent(event);\n        }\n\n        /**\r\n         * Sets active dialog, and inactivates others\r\n         * @private\r\n         */\n\n    }, {\n        key: '_focus',\n        value: function _focus() {\n\n            var _this = this;\n            this._setState(\"active\");\n\n            var allDialogs = window['FlowUI'] ? window['FlowUI']._dialogs : {};\n            for (var key in allDialogs) {\n                var dialog = allDialogs[key];\n                if (dialog.id != _this.id) {\n                    dialog._setState(\"inactive\");\n                }\n            }\n        }\n\n        /**\r\n         * Bind any necessary events\r\n         * @private\r\n         */\n\n    }, {\n        key: '_attachEvents',\n        value: function _attachEvents() {\n            var _this7 = this;\n\n            // Allow user to hit escape to close window (unless overwritten by param)\n            if (this.options.escapable) {\n                window.addEventListener(\"keyup\", function (event) {\n                    if (event.keyCode == 27) {\n                        _this7._close();\n                    }\n                }, false);\n            }\n        }\n\n        /**\r\n         * Register for any event listeners\r\n         * @private\r\n         */\n\n    }, {\n        key: '_registerEventListeners',\n        value: function _registerEventListeners() {\n\n            // Listen for dialog state change event\n            this.dialogElement.addEventListener('stateChange', this._onStateChange.bind(this), false);\n        }\n    }, {\n        key: 'close',\n        get: function get() {\n            return this._close;\n        }\n    }, {\n        key: 'dispose',\n        get: function get() {\n            return this._dispose;\n        }\n    }]);\n\n    return Dialog;\n}();\n\n/**\r\n * Options to customize Dialog\r\n */\n\nvar DialogOptions = function DialogOptions(_ref2) {\n    var className = _ref2.className,\n        _ref2$stackable = _ref2.stackable,\n        stackable = _ref2$stackable === undefined ? false : _ref2$stackable,\n        _ref2$escapable = _ref2.escapable,\n        escapable = _ref2$escapable === undefined ? true : _ref2$escapable,\n        _ref2$animation = _ref2.animation,\n        animation = _ref2$animation === undefined ? {} : _ref2$animation,\n        _ref2$events = _ref2.events,\n        events = _ref2$events === undefined ? {} : _ref2$events;\n\n    _classCallCheck(this, DialogOptions);\n\n    this.className = className || '';\n    this.escapable = escapable;\n    this.stackable = stackable;\n    this.animation = {\n        in: animation.in || 'pulseIn',\n        out: animation.out || 'pulseOut'\n    }, this.events = {\n        onopen: events.onopen || null,\n        onclose: events.onclose || null\n    };\n};\n\n},{\"../../loader/js/index.js\":2,\"../../modal/js/index.js\":3,\"./helpers.js\":1}]},{},[4])(4)\n});\n\n","\r\nmodule.exports = class Helpers {\r\n\r\n    /**\r\n     * Scroll to\r\n     * @param element\r\n     * @param to\r\n     * @param duration\r\n     */\r\n\r\n    static scrollTo(element, to, duration) {\r\n\r\n        let _this = this;\r\n\r\n        let start = element.scrollTop,\r\n            change = to - start,\r\n            increment = 20;\r\n\r\n        let animateScroll = (elapsedTime) => {\r\n            elapsedTime += increment;\r\n            let position = _this.easeInOut(elapsedTime, start, change, duration);\r\n            element.scrollTop = position;\r\n            if (elapsedTime < duration) {\r\n                setTimeout(() => {\r\n                    animateScroll(elapsedTime);\r\n                }, increment);\r\n            }\r\n        };\r\n\r\n        animateScroll(0);\r\n    }\r\n\r\n\r\n    /**\r\n     * Easing Function for Scrolling\r\n     * @param currentTime\r\n     * @param start\r\n     * @param change\r\n     * @param duration\r\n     * @returns {*}\r\n     */\r\n    static easeInOut(currentTime, start, change, duration) {\r\n        currentTime /= duration / 2;\r\n        if (currentTime < 1) {\r\n            return change / 2 * currentTime * currentTime + start;\r\n        }\r\n        currentTime -= 1;\r\n        return -change / 2 * (currentTime * (currentTime - 2) - 1) + start;\r\n    }\r\n\r\n\r\n}\r\n\r\n","'use strict';\r\n\r\n// Dependencies\r\nconst Modal = require('../../modal/js/index.js');\r\n\r\n\r\nmodule.exports = class Loader {\r\n\r\n    /**\r\n     *\r\n     * @param props\r\n     * props.text : text to display while loading\r\n     * props.parent : parent element to inject loader into\r\n     * props.promise : if provided, loader will close when promise resolved\r\n     * props.id : id of loader\r\n     */\r\n    constructor(props = {}) {\r\n\r\n        this.id = props.id || \"loader-\" + new Date().getTime();\r\n        this.modalId = props.modalId || \"loader-modal-\" + new Date().getTime(); // Generated ID for parent Modal\r\n        this.parent = props.parent ? (typeof props.parent === 'object' ? props.parent : document.querySelector(props.parent)) : document.body;\r\n        this.modalObj;\r\n\r\n        this.type = \"loader\";\r\n\r\n        window['FlowUI'] = window['FlowUI'] || {};\r\n\r\n        this._render();\r\n        this._exportObjInstance();\r\n\r\n    }\r\n\r\n\r\n    get close() {\r\n        return this._close;\r\n    }\r\n\r\n    get dispose() {\r\n        return this._dispose;\r\n    }\r\n\r\n    /**\r\n     * Save reference to instantiated modal to window\r\n     * so can access to object through DOM\r\n     * @private\r\n     */\r\n    _exportObjInstance() {\r\n\r\n        window['FlowUI'] = window['FlowUI'] || {};\r\n        window['FlowUI']._loaders = window['FlowUI']._loaders || {};\r\n        window['FlowUI']._loaders[this.id] = this;\r\n\r\n        // Attach a reference to parent modal\r\n        this.modalObj.children[this.id] = this;\r\n\r\n\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     * @private\r\n     */\r\n    _render() {\r\n\r\n        this._renderModal();\r\n\r\n        // Check that element doesn't already exist\r\n        if (!document.getElementById(this.id)) {\r\n            let container = document.createElement(\"div\");\r\n            container.id = this.id;\r\n            container.className = \"flowui-loader\";\r\n\r\n            let loaderElement = document.createElement(\"div\");\r\n            loaderElement.className = \"spinner\";\r\n            container.appendChild(loaderElement);\r\n\r\n            document.getElementById(this.modalObj.id).appendChild(container);\r\n        }\r\n\r\n        this._centerVertically();\r\n        this._animateIn();\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Render Modal\r\n     * @private\r\n     */\r\n    _renderModal() {\r\n        this.modalObj = new Modal({\r\n            id: this.modalId,\r\n            parent: this.parent\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Centre Dialog Vertically in Parent Element\r\n     * @private\r\n     */\r\n    _centerVertically() {\r\n\r\n        let loaderElement = document.getElementById(this.id);\r\n        const viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\r\n        const parentHeight = Math.max(this.parent.clientHeight, this.parent.innerHeight || 0);\r\n        const loaderHeight = loaderElement.offsetHeight;\r\n        const loaderWidth = loaderElement.offsetWidth;\r\n        const scrollPosition = window.scrollY;\r\n\r\n        // Center vertically in parent container\r\n        let topLoaderDiv = (parentHeight / 2) - (loaderHeight / 2);\r\n\r\n        // If parentHeight is >= viewportHeight, we need to use viewportHeight instead\r\n        if (parentHeight > viewportHeight) {\r\n            topLoaderDiv = (viewportHeight / 2) - (loaderHeight / 2);\r\n\r\n            // If user is scrolled down at all, we need to adjust to make sure loader\r\n            // is displayed within current viewport\r\n            if (scrollPosition > 0) {\r\n                topLoaderDiv += scrollPosition;\r\n            }\r\n        }\r\n\r\n        loaderElement.style.top = topLoaderDiv + \"px\";\r\n        loaderElement.style.left = 'calc(50% - ' + (loaderWidth/2)  + 'px)';\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Handles Animating Dialog In\r\n     * @private\r\n     */\r\n    _animateIn() {\r\n\r\n        setTimeout(() => {\r\n            document.getElementById(this.id).className += \" animated zoomInLoader\";\r\n        document.getElementById(this.id).style.display = \"\";\r\n    }, 400);\r\n\r\n    }\r\n\r\n    /**\r\n     * Handle Animating Out Dialog\r\n     * @private\r\n     */\r\n    _animateOut() {\r\n        document.getElementById(this.id).className += \" zoomOutLoader\";\r\n    }\r\n\r\n\r\n    /**\r\n     * Handle Closing and removing from DOM\r\n     * @private\r\n     */\r\n    _close(dispose = true) {\r\n        this._animateOut();\r\n        if (dispose) {\r\n            this.modalObj.close();\r\n            this._dispose();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Remove object reference from dom\r\n     * @private\r\n     */\r\n    _dispose() {\r\n\r\n        delete window.FlowUI['_loaders'][this.id];\r\n\r\n    }\r\n\r\n\r\n\r\n}","'use strict';\r\n\r\nmodule.exports = class Modal {\r\n\r\n    /**\r\n     * Modal Constructor\r\n     * @param props\r\n     * @param.id : Modal Id\r\n     * @param.parent : Parent element to inject modal into\r\n     * @param.className : Class names to append to modal\r\n     */\r\n    constructor(props) {\r\n\r\n        props = props || {};\r\n\r\n        this.id = props.id || \"modal-\" + new Date().getTime();\r\n        this.parent = props.parent ? (typeof props.parent === 'object' ? props.parent : document.querySelector(props.parent)) : document.body;\r\n        this.className = props.className || \"\";\r\n        this.children = {}; // associative array of child elements using this modal\r\n\r\n        // Public Properties\r\n        this.type = \"modal\";\r\n        this.element = null;\r\n\r\n        window['FlowUI'] = window['FlowUI'] || {};\r\n\r\n        // Check if modal already exists, if so assign values from original\r\n        // and don't re-render or export instance\r\n        if (window['FlowUI']._modals && window['FlowUI']._modals[this.id]) {\r\n            Object.assign(this, window['FlowUI']._modals[this.id]);\r\n            return;\r\n        }\r\n\r\n        this._render();\r\n        this._exportObjInstance();\r\n    }\r\n\r\n    get close() {\r\n        return this._close;\r\n    }\r\n\r\n\r\n    /**\r\n     * Save reference to instantiated modal to window\r\n     * so can access to object through DOM\r\n     * @private\r\n     */\r\n    _exportObjInstance() {\r\n        window['FlowUI'] = window['FlowUI'] || {};\r\n        window['FlowUI']._modals = window['FlowUI']._modals || {};\r\n        window['FlowUI']._modals[this.id] = this;\r\n    }\r\n\r\n\r\n    /**\r\n     * Render Modal\r\n     * @private\r\n     */\r\n    _render() {\r\n\r\n        this.parent.className += ' flowui-modal-parent';\r\n\r\n        const container = document.createElement(\"div\");\r\n        container.setAttribute(\"id\", this.id);\r\n        container.setAttribute(\"class\", 'flowui-modal animated fadeIn ' + this.className);\r\n        this.parent.appendChild(container);\r\n\r\n        this.element = container;\r\n\r\n    }\r\n\r\n    /**\r\n     * Close Modal\r\n     * @private\r\n     */\r\n    _close() {\r\n\r\n        let modalElement = document.getElementById(this.id);\r\n        modalElement.className += \" fadeOut\";\r\n\r\n        setTimeout(() => {\r\n            modalElement.parentNode.removeChild(modalElement);\r\n        this.parent.className = this.parent.className.replace('flowui-modal-parent', '');\r\n    }, 1000);\r\n\r\n        this._dispose();\r\n    }\r\n\r\n    // Remove object references\r\n    _dispose() {\r\n\r\n        // Delete any child object references (UI elements using this modal obj)\r\n        for (var key in this.children) {\r\n            this.children[key].dispose();\r\n        }\r\n        delete window['FlowUI']._modals[this.id];\r\n\r\n    }\r\n\r\n}\r\n\r\n","'use strict';\r\n\r\nconst Helpers = require('./helpers.js');\r\nconst Modal = require('../../modal/js/index.js');\r\nconst Loader = require('../../loader/js/index.js');\r\n\r\nmodule.exports = class Dialog {\r\n\r\n    /**\r\n     * Dialog Constructor\r\n     * @param props {\r\n     *  id: Unique ID for Dialog\r\n     *  title: Dialog Title\r\n     *  html: Html to inject\r\n     *  url: URL to inject content from\r\n     *  promise: Promise object to get content from\r\n     *  buttons ([{title: '', onclick: function}]): Array of buttons to render\r\n     *  options (DialogOption): Customization options\r\n     */\r\n\r\n    constructor({id, title, html, url, promise, buttons, options = {}}) {\r\n\r\n        // Arguments\r\n        this.id = (id || \"dialog-\" + new Date().getTime());\r\n        this.title = title;\r\n        this.html = html;\r\n        this.url = url;\r\n        this.promise = promise;\r\n        this.buttons = buttons;\r\n\r\n        this.options = new DialogOptions(options);\r\n\r\n        // Public Properties\r\n        this.type = \"dialog\";\r\n        this.modalObj;\r\n        this.loaderObj;\r\n        this.dialogElement = null;\r\n        this.parent = document.body;\r\n\r\n        window['FlowUI'] = window['FlowUI'] || {};\r\n\r\n        this._renderDialog();\r\n        this._attachEvents();\r\n        this._registerEventListeners();\r\n        this._exportObjInstance();\r\n\r\n    }\r\n\r\n\r\n    get close() {\r\n        return this._close;\r\n    }\r\n\r\n    get dispose() {\r\n        return this._dispose;\r\n    }\r\n\r\n\r\n    /**\r\n     * Save reference to instantiated dialog's to window\r\n     * so can access to object through DOM\r\n     * @private\r\n     */\r\n    _exportObjInstance() {\r\n\r\n        window['FlowUI'] = window['FlowUI'] || {};\r\n        window['FlowUI']._dialogs = window['FlowUI']._dialogs || {};\r\n        window['FlowUI']._dialogs[this.id] = this;\r\n\r\n        // Attach a reference to parent modal\r\n        this.modalObj.children[this.id] = this;\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Render Modal\r\n     * @private\r\n     */\r\n    _renderModal() {\r\n\r\n        // Check if modal already exists for parent\r\n        if (window['FlowUI']._modals) {\r\n            for (var key in window['FlowUI']._modals) {\r\n                let m = window['FlowUI']._modals[key];\r\n                if (m.parent == this.parent) {\r\n                    this.modalObj = window['FlowUI']._modals[m.id];\r\n                }\r\n            }\r\n        }\r\n\r\n        // If it doesn't exist, create new instance\r\n        if (!this.modalObj) {\r\n            this.modalObj = new Modal();\r\n        }\r\n\r\n        // If dialog content requires http request, show loader before rendering\r\n        if (this.url || this.promise) {\r\n            this.loaderObj = Loader({\r\n                modalId: this.modalObj.id\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Get Dialog Content (Async)\r\n     * @private\r\n     */\r\n    _getContent() {\r\n\r\n        // If promise provided during instantiation, use promise object instead to get content\r\n        if (this.promise) {\r\n            return this.promise;\r\n        }\r\n\r\n        return new Promise((resolve, reject) => {\r\n\r\n                // Static content provided as property\r\n                if (this.html) {\r\n            resolve(this.html);\r\n        }\r\n\r\n        // Content from a partial or template retreived via http\r\n    else if (this.url) {\r\n\r\n            // Do the usual XHR stuff\r\n            var req = new XMLHttpRequest();\r\n            req.open('GET', this.url);\r\n\r\n            req.onload = function() {\r\n                if (req.status == 200) {\r\n                    // Resolve the promise with the response text\r\n                    resolve(req.response);\r\n                }\r\n                else {\r\n                    reject(Error(req.statusText));\r\n                }\r\n            };\r\n\r\n            req.onerror = function() {\r\n                reject(Error(\"Network Error\"));\r\n            };\r\n\r\n            req.send();\r\n\r\n        }\r\n    });\r\n\r\n    }\r\n\r\n    /**\r\n     * Render Dialog\r\n     * @private\r\n     */\r\n    _renderDialog() {\r\n\r\n        this._renderModal();\r\n        let contentPromise = this._getContent();\r\n\r\n        // Render Container\r\n        let container = document.createElement(\"div\");\r\n        container.setAttribute('id', this.id);\r\n        container.setAttribute('class', 'flowui-dialog animated ' + (this.options.className ? this.options.className : ''));\r\n        //container.style.display = \"none\";\r\n\r\n        // Render Content Wrapper\r\n        let contentWrapper = document.createElement('div');\r\n        contentWrapper.setAttribute('class', 'content');\r\n        if (this.title) {\r\n            let title = document.createElement('div');\r\n            title.setAttribute('class', 'title');\r\n            title.innerHTML = this.title;\r\n            contentWrapper.appendChild(title);\r\n        }\r\n\r\n        // Render Inner Content\r\n        let content = document.createElement('div');\r\n        contentPromise.then((html) => {\r\n            content.innerHTML = html;\r\n    });\r\n        content.setAttribute('class', 'inner-content');\r\n        contentWrapper.appendChild(content);\r\n\r\n        // Render Close Button\r\n        let closeButtonElement = document.createElement('a');\r\n        closeButtonElement.onclick = this._close.bind(this);\r\n        closeButtonElement.className = \"close\";\r\n        contentWrapper.appendChild(closeButtonElement);\r\n\r\n        // Render Buttons\r\n        if (this.buttons && this.buttons.length > 0) {\r\n            let buttonsWrapper = document.createElement('div');\r\n            buttonsWrapper.setAttribute('class', 'buttons');\r\n            let x = 0;\r\n            this.buttons.forEach(function(button) {\r\n                let buttonElement = document.createElement(\"a\");\r\n                buttonElement.setAttribute('class', 'flowui-button ' + x++ + ' ' + (button.className || ''));\r\n                buttonElement.innerHTML = button.title;\r\n                buttonElement.onclick = button.onclick;\r\n                buttonElement.href = button.href || 'javascript:;';\r\n                buttonsWrapper.appendChild(buttonElement);\r\n            });\r\n            contentWrapper.appendChild(buttonsWrapper);\r\n        }\r\n\r\n        container.appendChild(contentWrapper);\r\n\r\n        // Add to modal\r\n        this.modalObj.element.appendChild(container);\r\n\r\n        // Store dialog element to class property\r\n        this.dialogElement = container;\r\n\r\n        // Once content loaded, display\r\n        contentPromise.then(() => {\r\n\r\n            // Hide Loader\r\n            if (this.loaderObj) {\r\n            this.loaderObj.close(false);\r\n        }\r\n\r\n        this._bindScripts();\r\n        this._positionDialog();\r\n        this._focus();\r\n\r\n    });\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * Positions Dialog in center of viewport,\r\n     * scrolling page to top of Dialog if needed\r\n     * @private\r\n     */\r\n    _positionDialog() {\r\n\r\n        let dialogElement = document.getElementById(this.id);\r\n        const viewportHeight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\r\n        const viewportWidth = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\r\n        const dialogHeight = dialogElement.offsetHeight;\r\n        const dialogWidth = dialogElement.offsetWidth;\r\n        const scrollPosition = window.scrollY;\r\n\r\n        let y = scrollPosition + (viewportHeight / 2) - (dialogHeight / 2);\r\n        y = y < 0 ? 30 : y;\r\n\r\n        dialogElement.style.top = y + 'px';\r\n\r\n        // If dialog heigh doesn't fit in viewport, scroll page to top of dialog\r\n        if (dialogHeight > viewportHeight) {\r\n            this._scrollToDialog();\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Scroll Page to top of Dialog\r\n     * @private\r\n     */\r\n    _scrollToDialog() {\r\n\r\n        let yPosition = this.dialogElement.offsetTop - 30;\r\n        yPosition = yPosition < 0 ?  0 : yPosition;\r\n        Helpers.scrollTo(document.body, yPosition, 1000);\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Bind Scripts\r\n     * Dialog content can contain scripts, which need to be added to dom in order to be made available\r\n     * @private\r\n     */\r\n    _bindScripts() {\r\n\r\n        const scripts = Array.from(this.dialogElement.getElementsByTagName('script'));\r\n        let externalScripts = [];\r\n        let embeddedScripts = [];\r\n\r\n        // Separate external script from embedded\r\n        scripts.forEach((script) => {\r\n            if (script.src == \"\") {\r\n            embeddedScripts.push(script);\r\n        }\r\n    else {\r\n            externalScripts.push(script.src);\r\n        }\r\n    });\r\n\r\n        // Helper function to load array of external scripts\r\n        let loadScripts = function(scriptsArray, onComplete) {\r\n\r\n            if (scriptsArray.length > 0) {\r\n                let newScript = document.createElement('script');\r\n                newScript.type = 'text/javascript';\r\n                newScript.src = scriptsArray[0];\r\n                document.documentElement.appendChild(newScript);\r\n\r\n                newScript.addEventListener (\"load\", function() {\r\n                    console.log('External script from content loaded:', scriptsArray[0]);\r\n                    scriptsArray.shift();\r\n                    loadScripts(scriptsArray, onComplete);\r\n\r\n                }, false);\r\n            }\r\n            else {\r\n                onComplete();\r\n            }\r\n        }\r\n\r\n        // First, load external scripts\r\n        loadScripts(externalScripts, function() {\r\n\r\n            // Once all external scripts loaded, add embedded scripts\r\n            embeddedScripts.forEach((script) => {\r\n                let newScript = document.createElement('script');\r\n            newScript.text = script.innerHTML;\r\n            document.documentElement.appendChild(newScript);\r\n            console.log('Embedded script from content added');\r\n        });\r\n\r\n        });\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Handle Closing Dialog and removing from DOM\r\n     * @private\r\n     */\r\n    _close() {\r\n\r\n        if (this.options.events.onclose) {\r\n            this.options.events.onclose();\r\n        }\r\n        this._setState('closed');\r\n        this._dispose();\r\n\r\n        // Only close modal if there's no other dialogs using it\r\n        const modalHasChildDialogs = () =>\r\n        {\r\n            var childDialogs = [];\r\n            for (var key in this.modalObj.children) {\r\n                var flowObject = this.modalObj.children[key];\r\n                if (flowObject.type === 'dialog') {\r\n                    childDialogs.push(flowObject);\r\n                }\r\n            }\r\n            return childDialogs.length > 0;\r\n\r\n        }\r\n\r\n        if (!modalHasChildDialogs()) {\r\n            this.modalObj.close();\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Remove instance from global window scope and check if another dialog\r\n     * should be made active\r\n     * @private\r\n     */\r\n    _dispose() {\r\n\r\n        // TO DO: Element from Remove from DOM\r\n        setTimeout(()=> {\r\n            try {\r\n                this.dialogElement.parentNode.removeChild(this.dialogElement);\r\n    }\r\n    catch (ex) {\r\n            // modal obj already removed\r\n        }\r\n    }, 1000);\r\n\r\n        // Delete object reference from parent modal's children\r\n        for (var key in this.modalObj.children) {\r\n            var flowObj = this.modalObj.children[key];\r\n            if (flowObj.id == this.id) {\r\n                delete this.modalObj.children[this.id];\r\n            }\r\n        }\r\n\r\n        delete window['FlowUI']._dialogs[this.id];\r\n\r\n        this._reactivatePreviousDialog();\r\n    }\r\n\r\n    /**\r\n     * Reactives previous dialog (if any)\r\n     * @private\r\n     */\r\n    _reactivatePreviousDialog() {\r\n        let allDialogs = window['FlowUI']._dialogs;\r\n        let previousDialog = allDialogs[Object.keys(allDialogs)[Object.keys(allDialogs).length - 1]]\r\n        if (previousDialog) {\r\n            setTimeout(() => {\r\n                previousDialog._focus();\r\n        }, 500);\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * Handle Dialog State Change (focus, inactive, dismissed)\r\n     * @param e\r\n     * @returns {string}\r\n     * @private\r\n     */\r\n    _onStateChange(e) {\r\n\r\n        // Strip out any additional classes added after\r\n        let sanitizeClasses = () => {\r\n            const classes = \"flowui-dialog animated \" + this.options.className;\r\n            return classes;\r\n        }\r\n\r\n        document.getElementById(this.id).setAttribute(\"state\", e.detail.status);\r\n\r\n        switch (e.detail.status) {\r\n            case 'active':\r\n                document.getElementById(this.id).className =  sanitizeClasses() + ' ' + this.options.animation.in;\r\n                break;\r\n            case 'inactive':\r\n                // If dialog isn't stackable, instead of just inacivating - we ne to also dispose\r\n                if (!this.options.stackable) {\r\n                    document.getElementById(this.id).className =  sanitizeClasses() + ' inactive';\r\n                    this._dispose();\r\n                    break;\r\n                }\r\n                if (Object.keys(window['FlowUI']._dialogs).length > 1) {\r\n                    document.getElementById(this.id).className =  sanitizeClasses() + ' inactive';\r\n                    break;\r\n                }\r\n                document.getElementById(this.id).className = sanitizeClasses() + ' ' +  this.options.animation.out;\r\n                break;\r\n            case 'closed':\r\n                document.getElementById(this.id).className = sanitizeClasses() + ' ' +  this.options.animation.out;\r\n                break;\r\n            default:\r\n            // catch all\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Set Dialog State (active, inactive)\r\n     * @private\r\n     */\r\n    _setState(state) {\r\n\r\n        var event = new CustomEvent(\"stateChange\", { detail: { status: state } });\r\n        this.dialogElement.dispatchEvent(event);\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    /**\r\n     * Sets active dialog, and inactivates others\r\n     * @private\r\n     */\r\n    _focus() {\r\n\r\n        let _this = this;\r\n        this._setState(\"active\");\r\n\r\n        let allDialogs = window['FlowUI'] ? window['FlowUI']._dialogs : {};\r\n        for (var key in allDialogs) {\r\n            var dialog = allDialogs[key];\r\n            if (dialog.id != _this.id) {\r\n                dialog._setState(\"inactive\");\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Bind any necessary events\r\n     * @private\r\n     */\r\n    _attachEvents() {\r\n\r\n        // Allow user to hit escape to close window (unless overwritten by param)\r\n        if (this.options.escapable) {\r\n            window.addEventListener(\"keyup\", (event) => {\r\n                if (event.keyCode == 27) {\r\n                this._close();\r\n            }\r\n        }, false);\r\n        }\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * Register for any event listeners\r\n     * @private\r\n     */\r\n    _registerEventListeners() {\r\n\r\n        // Listen for dialog state change event\r\n        this.dialogElement.addEventListener('stateChange', this._onStateChange.bind(this), false);\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\n/**\r\n * Options to customize Dialog\r\n */\r\nclass DialogOptions {\r\n\r\n    constructor({className, stackable = false, escapable = true, animation = {}, events = {} }) {\r\n\r\n        this.className = className || '';\r\n        this.escapable = escapable;\r\n        this.stackable = stackable;\r\n        this.animation =  {\r\n            in: animation.in || 'pulseIn',\r\n            out: animation.out || 'pulseOut'\r\n        },\r\n            this.events = {\r\n                onopen: events.onopen || null,\r\n                onclose: events.onclose || null\r\n            }\r\n    }\r\n\r\n}\r\n\r\n"]}